(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),c=t.n(r),i=t(14),u=t(2),l=(t(20),function(e){var n=e.p,t=e.dc;return o.a.createElement("p",null,n.name," ",n.number," ",o.a.createElement("button",{id:n.id,onClick:t},"delete"))}),m=function(e){var n=e.persons,t=e.dc;return n.map((function(e){return o.a.createElement(l,{p:e,key:e.name,dc:t})}))},s=function(e){return o.a.createElement("div",null,o.a.createElement(m,{persons:e.persons,dc:e.deleteContact}))},f=function(e){return o.a.createElement("div",null,"filter shown with: ",o.a.createElement("input",{value:e.filtervalue,onChange:e.changeFunction}))},d=function(e){return o.a.createElement("form",{onSubmit:e.submitPerson},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.nameValue,onChange:e.nameChange})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.numValue,onChange:e.numChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},p=t(3),h=t.n(p),b="/api/persons",g=function(){return h.a.get(b).then((function(e){return e.data}))},v=function(e){return h.a.post(b,e).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},y=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},C=function(e){return null===e.message?null:o.a.createElement("div",{className:e.type},e.message)},w=function(e){var n=Object(a.useState)([]),t=Object(u.a)(n,2),r=t[0],c=t[1],l=Object(a.useState)(""),m=Object(u.a)(l,2),p=m[0],h=m[1],b=Object(a.useState)(""),w=Object(u.a)(b,2),j=w[0],O=w[1],k=Object(a.useState)(""),S=Object(u.a)(k,2),T=S[0],P=S[1],V=Object(a.useState)({message:null,type:"errornotification"}),R=Object(u.a)(V,2),x=R[0],D=R[1];Object(a.useEffect)((function(){console.log("Running Effect Hook"),g().then((function(e){console.log("Response received"),c(e)}))}),[]);return o.a.createElement("div",null,o.a.createElement(C,{message:x.message,type:x.type}),o.a.createElement("h2",null,"Phonebook"),o.a.createElement(f,{changeFunction:function(e){P(e.target.value)},filtervalue:T}),o.a.createElement("h2",null,"add a new"),o.a.createElement(d,{nameValue:p,nameChange:function(e){h(e.target.value)},numValue:j,numChange:function(e){O(e.target.value)},submitPerson:function(e){if(e.preventDefault(),""!==p&&""!==j)if(r.filter((function(e){return e.name.toLowerCase()===p.toLowerCase()})).length>0)if(window.confirm(p+" is already added to the phonebook, replace the old number with a new one?")){var n,t=r.map((function(e){return e.name===p?n={name:e.name,number:j,id:e.id}:{name:e.name,number:e.number,id:e.id}}));E(n.id,{name:n.name,number:n.number}).then((function(e){c(t),h(""),O("")})).then((function(){D({message:"Contact '".concat(p,"' has been updated"),type:"notification"}),setTimeout((function(){D({message:null,type:"errornotification"})}),3e3)}))}else h(""),O("");else{var a=Object(i.a)(r);v({name:p,number:j}).then((function(e){a.push({name:p,number:j,id:e.id}),c(a),h(""),O("")})).then((function(){D({message:"Contact '".concat(p,"' has been created"),type:"notification"}),setTimeout((function(){D({message:null,type:"errornotification"})}),3e3)})).catch((function(e){console.log(e.response.data),D({message:"Phone validation failed: '".concat(e.response.data.error,"'"),type:"errornotification"}),setTimeout((function(){D({message:null,type:"errornotification"})}),3e3)}))}}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(s,{persons:r.filter((function(e){return e.name.match(RegExp("^"+T+".*","i"))})),deleteContact:function(e){var n=r.filter((function(n){return n.id===e.target.id}));if(n.length>0&&window.confirm("Delete "+n[0].name+"?")){var t=r.filter((function(n){return n.id!==e.target.id}));y(n[0].id).then((function(e){h(""),O("")})).then((function(){D({message:"Contact '".concat(n[0].name,"' has been deleted"),type:"notification"}),setTimeout((function(){D({message:null,type:"errornotification"})}),3e3)})).catch((function(e){D({message:"Information of '".concat(n[0].name,"' has already been removed from server"),type:"errornotification"}),setTimeout((function(){D({message:null,type:"errornotification"})}),3e3)})).finally((function(){c(t)}))}}}))};c.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.647f327b.chunk.js.map